<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Verda4Garden ‚Äì Pets, Sheckles & Sprinkler Available</title>
<style>
  /* ... (CSS sama seperti sebelumnya) ... */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f8f5f0;
    margin: 0; padding: 0; color: #444;
  }
  header {
    background: linear-gradient(to right, #e8dcc9, #f4ede3);
    padding: 30px;
    text-align: center;
    font-size: 28px;
    font-weight: 700;
    color: #5a4b3b;
    border-bottom: 3px solid #e1d4be;
    user-select: none;
  }
  .container {
    max-width: 960px;
    margin: 30px auto 60px;
    padding: 30px;
    background: #fffaf3;
    border-radius: 14px;
    box-shadow: 0 0 20px rgba(0,0,0,0.07);
  }
  h3 {
    color: #7a614c;
    margin-top: 30px;
    margin-bottom: 16px;
    font-weight: 700;
    text-align: center;
  }
  .pet-list, .sheckles-list, .sprinkler-list {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: center;
  }
  .pet-item {
    background: #fef7ee;
    padding: 18px 22px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.06);
    font-size: 16px;
    color: #5a4b3b;
    cursor: pointer;
    flex: 1 1 260px;
    max-width: 300px;
    display: flex;
    align-items: flex-start;
    gap: 14px;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    user-select: none;
    flex-direction: column;
  }
  .pet-item:hover {
    transform: translateY(-6px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  }
  .pet-icon {
    font-size: 48px;
    width: 64px;
    text-align: center;
    user-select: none;
    flex-shrink: 0;
  }
  .pet-info {
    flex-grow: 1;
  }
  .pet-info strong {
    color: #a0683c;
    font-size: 18px;
    display: block;
    margin-bottom: 6px;
  }
  .pet-info p {
    font-size: 14px;
    margin: 0;
    line-height: 1.4;
  }
  /* Cart Panel */
  #cartPanel {
    position: fixed;
    top: 80px;
    right: 0;
    width: 320px;
    height: 90vh;
    background: #fffaf3;
    box-shadow: -3px 0 15px rgba(0,0,0,0.1);
    border-radius: 14px 0 0 14px;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    user-select: none;
    transform: translateX(100%);
    transition: transform 0.3s ease;
    z-index: 10000;
  }
  #cartPanel.open {
    transform: translateX(0);
  }
  #cartToggleBtn {
    position: fixed;
    top: 90px;
    right: 320px;
    background: #25d366;
    color: white;
    border: none;
    border-radius: 12px 0 0 12px;
    padding: 10px 18px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    user-select: none;
    transition: background-color 0.2s ease;
    z-index: 10001;
  }
  #cartToggleBtn:hover {
    background: #20b858;
  }
  #cartPanel h3 {
    margin: 0 0 16px 0;
    color: #7a614c;
    font-size: 22px;
    text-align: center;
  }
  #cartItems {
    flex-grow: 1;
    overflow-y: auto;
    margin-bottom: 16px;
  }
  .cart-item {
    border-bottom: 1px solid #e0d4c2;
    padding: 8px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .cart-item-info {
    flex-grow: 1;
  }
  .cart-item-name {
    font-weight: 700;
    color: #a0683c;
  }
  .cart-item-controls {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .cart-item-controls button {
    background: #a0683c;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 4px 8px;
    cursor: pointer;
    font-weight: 700;
  }
  .cart-item-controls button:disabled {
    background: #e0d4c2;
    cursor: not-allowed;
  }
  #cartTotal {
    font-weight: 700;
    font-size: 18px;
    color: #5a4b3b;
    text-align: right;
    margin-bottom: 16px;
  }
  #checkoutForm {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  #checkoutForm label {
    font-weight: 600;
    color: #5a4b3b;
  }
  #checkoutForm input, #checkoutForm textarea, #checkoutForm select {
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 14px;
    resize: vertical;
  }
  #checkoutBtn {
    background: #25d366;
    color: white;
    border: none;
    border-radius: 12px;
    padding: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }
  #checkoutBtn:disabled {
    background: #b2ddb0;
    cursor: not-allowed;
  }
  #checkoutBtn:hover:not(:disabled) {
    background: #20b858;
  }
  .error {
    border-color: #e94b35;
  }
  .error-message {
    font-size: 12px;
    color: #e94b35;
    display: none;
  }
  /* Responsive */
  @media (max-width: 700px) {
    #cartPanel {
      width: 100%;
      height: 50vh;
      bottom: 0;
      top: auto;
      border-radius: 14px 14px 0 0;
      transform: translateY(100%);
    }
    #cartPanel.open {
      transform: translateY(0);
    }
    #cartToggleBtn {
      right: 0;
      top: auto;
      bottom: 50vh;
      border-radius: 12px 12px 0 0;
    }
  }
</style>
</head>
<body>

<header>Verda4Garden ‚Äì Pets, Sheckles & Sprinkler Available</header>

<div class="container">

  <h3>Pets Available</h3>
  <div class="pet-list" id="petList"></div>

  <h3>Sheckles Available</h3>
  <div class="sheckles-list" id="shecklesList"></div>

  <h3>Sprinkler Available</h3>
  <div class="sprinkler-list" id="sprinklerList"></div>

</div>

<button id="cartToggleBtn" aria-expanded="false" aria-controls="cartPanel" aria-label="Toggle keranjang belanja">üõí Keranjang</button>

<!-- Cart Panel -->
<aside id="cartPanel" role="region" aria-label="Keranjang belanja">
  <h3>Keranjang</h3>
  <div id="cartItems">Keranjang kosong</div>
  <div id="cartTotal">Total: Rp 0</div>

  <form id="checkoutForm" aria-label="Formulir checkout">
    <label for="buyerName">Nama ROBLOX *</label>
    <input type="text" id="buyerName" name="buyerName" required placeholder="USN roblox" autocomplete="name" />
    <div id="buyerNameError" class="error-message">Nama minimal 3 karakter.</div>

    <label for="paymentMethod">Metode Pembayaran *</label>
    <select id="paymentMethod" name="paymentMethod" required>
      <option value="" disabled selected>Pilih metode pembayaran</option>
      <option value="GoPay">GoPay</option>
      <option value="Dana">Dana</option>
      <option value="ShopeePay">ShopeePay</option>
      <option value="QRIS">QRIS (scan di linktree)</option>
      <option value="COD">COD (Cash on Delivery)</option>
    </select>
    <div id="paymentMethodError" class="error-message">Pilih metode pembayaran.</div>

    <label for="buyerNote">Catatan (opsional)</label>
    <textarea id="buyerNote" name="buyerNote" rows="2" placeholder="Contoh: minta yang gemuk kak"></textarea>
    <button type="submit" id="checkoutBtn" disabled>Checkout via WhatsApp</button>
  </form>
</aside>

<script>
  const petData = {
    DB: { emoji: "üêùüéâ", name: "Disco Bee", rarity: "Divine", desc: "Pet Divine yang paling langka. Setiap ~15 menit ada peluang 12% untuk membuat buah sekitar menjadi Disco dengan nilai jual hingga 125x.", price: 80000 },
    QB: { emoji: "üëëüêù", name: "Queen Bee", rarity: "Divine", desc: "Pet Divine terbesar. Setiap ~25 menit memberikan mutasi Pollinated pada buah sekitar dan menyegarkan kemampuan pet dengan cooldown tertinggi.", price: 30000 },
    Redfox: { emoji: "ü¶ä", name: "Red Fox", rarity: "Mythical", desc: "Tiada ~8 menit duplikasi seed player lain.", price: 15000 },
    Mantis10: { emoji: "ü¶ó", name: "Praying Mantis (10+)", rarity: "Mythical", desc: "Setiap ~80 detik beri ~1.5√ó chance mutasi.", price: 5000 },
    Mantis30: { emoji: "ü¶ó", name: "Praying Mantis (30+)", rarity: "Mythical", desc: "Setiap ~80 detik beri ~1.5√ó chance mutasi.", price: 10000 },
    Seal: { emoji: "ü¶≠", name: "Seal", rarity: "Rare", desc: "Saat dijual dapat refund pet egg.", price: 10000 },
    Macaw: { emoji: "ü¶ú‚ù§Ô∏è", name: "Scarlet Macaw", rarity: "Paradise", desc: "Ada chance apply Verdent mutation.", price: 30000 },
    Moon: { emoji: "üåïüê±", name: "Moon Cat", rarity: "Legendary", desc: "Boost ukuran buah + replant Moonlit fruits.", price: 5000 },
    Blood: { emoji: "ü¶âü©∏", name: "Blood Owl", rarity: "Mythical", desc: "Tambahan XP ke semua pet aktif.", price: 15000 },
    Night: { emoji: "üåôü¶â", name: "Night Owl", rarity: "Night", desc: "Tambahan 0.23 XP/s ke semua pet.", price: 10000 },
    Owl: { emoji: "ü¶â", name: "Owl", rarity: "Mythical", desc: "Tambahan 0.22 XP/s ke semua pet.", price: 10000 },
    Peacock: { emoji: "ü¶ö", name: "Peacock", rarity: "Paradise", desc: "Kurangi cooldown pet lain secara acak.", price: 10000 },
    Capybara: { emoji: "ü¶´", name: "Capybara", rarity: "Paradise", desc: "Tidak pernah kelaparan + lebih banyak XP.", price: 10000 },
    Toucan: { emoji: "ü¶ú", name: "Toucan", rarity: "Rare", desc: "Boost ukuran buah tropis dalam radius.", price: 10000 },
    Orangutan: { emoji: "ü¶ß", name: "Orangutan", rarity: "Rare", desc: "~2.5% refund buah saat dijual.", price: 15000 },
    Petal: { emoji: "üå∏üêù", name: "Petal Bee", rarity: "Event", desc: "Polinasi tiap 25 menit + 1% chance bunga tetap.", price: 5000 },

    Dragonfly: {
      emoji: "ü™≤",
      name: "Dragonfly",
      rarity: "Divine",
      desc: "Pet Divine pertama yang dapat diperoleh dari Bug Egg dengan peluang 1%. Setiap ~5 menit, Dragonfly akan mengubah satu buah acak menjadi emas, meningkatkan nilainya secara signifikan.",
      price: 50000
    },
    Raccoon: {
      emoji: "ü¶ù",
      name: "Raccoon",
      rarity: "Divine",
      desc: "Pet Divine yang dapat diperoleh dari Night Egg dengan peluang 0,1%. Setiap ~15 menit, Raccoon akan mengunjungi kebun pemain lain, menduplikasi buah acak mereka, dan memberikannya kepada pemilik pet. Jika buah yang sama diduplikasi, nilainya akan berkurang sebesar 1% atau 0,5% tergantung pada KG-nya.",
      price: 80000
    },
    Butterfly: {
      emoji: "ü¶ã",
      name: "Butterfly",
      rarity: "Mythical",
      desc: "Pet Mythical yang dapat diperoleh dari Anti Bee Egg dengan peluang 1%. Setiap ~30 menit, Butterfly akan terbang ke buah terdekat dengan 5+ mutasi, menghapus semua mutasi dari buah tersebut, dan mengubahnya menjadi pelangi! Efek ini mengabaikan buah yang difavoritkan.",
      price: 65000
    },
    MimicOctopus: {
      emoji: "üêô",
      name: "Mimic Octopus",
      rarity: "Mythical",
      desc: "Pet Mythical yang dapat diperoleh dari Paradise Egg dengan peluang 1%. Setiap ~20 menit, Mimic Octopus akan meniru dan menyalin kemampuan dari pet lain secara acak dan melaksanakan kemampuannya tersebut.",
      price: 65000
    }
  };

  const shecklesData = {
    "1.8T": 3000,
    "2.7T": 5000,
    "3.6T": 8000,
    "4.5T": 10000
  };

  const sprinklerData = {
    "Full Paket": 12000
  };

  const petList = document.getElementById('petList');
  const shecklesList = document.getElementById('shecklesList');
  const sprinklerList = document.getElementById('sprinklerList');
  const cartPanel = document.getElementById('cartPanel');
  const cartToggleBtn = document.getElementById('cartToggleBtn');
  const cartItems = document.getElementById('cartItems');
  const cartTotal = document.getElementById('cartTotal');
  const checkoutForm = document.getElementById('checkoutForm');
  const buyerName = document.getElementById('buyerName');
  const buyerNameError = document.getElementById('buyerNameError');
  const paymentMethod = document.getElementById('paymentMethod');
  const paymentMethodError = document.getElementById('paymentMethodError');
  const buyerNote = document.getElementById('buyerNote');
  const checkoutBtn = document.getElementById('checkoutBtn');

  let cart = {};

  function formatIDR(num) {
    return num.toLocaleString('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 });
  }

  function renderPets() {
    petList.innerHTML = '';
    for (const key in petData) {
      const pet = petData[key];
      const div = document.createElement('div');
      div.className = 'pet-item';
      div.setAttribute('role', 'button');
      div.setAttribute('tabindex', '0');
      div.setAttribute('aria-label', `${pet.name}, harga ${formatIDR(pet.price)}`);
      div.dataset.key = key;
      div.innerHTML = `
        <div class="pet-icon">${pet.emoji}</div>
        <div class="pet-info">
          <strong>${pet.name}</strong>
          <p>${pet.desc}</p>
          <p><strong>Harga:</strong> ${formatIDR(pet.price)}</p>
        </div>
      `;
      div.addEventListener('click', () => addToCart(key));
      div.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          addToCart(key);
          e.preventDefault();
        }
      });
      petList.appendChild(div);
    }
  }

  function renderSheckles() {
    shecklesList.innerHTML = '';
    for (const key in shecklesData) {
      const price = shecklesData[key];
      const div = document.createElement('div');
      div.className = 'pet-item';
      div.setAttribute('role', 'button');
      div.setAttribute('tabindex', '0');
      div.setAttribute('aria-label', `Sheckles ${key}, harga ${formatIDR(price)}`);
      div.dataset.key = `sheckles_${key}`;
      div.dataset.price = price;
      div.textContent = `${key} Sheckles - ${formatIDR(price)}`;
      div.addEventListener('click', () => addToCart(`sheckles_${key}`, price, key));
      div.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          addToCart(`sheckles_${key}`, price, key);
          e.preventDefault();
        }
      });
      shecklesList.appendChild(div);
    }
  }

  function renderSprinklers() {
    sprinklerList.innerHTML = '';
    for (const key in sprinklerData) {
      const price = sprinklerData[key];
      const div = document.createElement('div');
      div.className = 'pet-item';
      div.setAttribute('role', 'button');
      div.setAttribute('tabindex', '0');
      div.setAttribute('aria-label', `Sprinkler ${key}, harga ${formatIDR(price)}`);
      div.dataset.key = `sprinkler_${key}`;
      div.dataset.price = price;
      div.textContent = `${key} Sprinkler - ${formatIDR(price)}`;
      div.addEventListener('click', () => addToCart(`sprinkler_${key}`, price, key));
      div.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          addToCart(`sprinkler_${key}`, price, key);
          e.preventDefault();
        }
      });
      sprinklerList.appendChild(div);
    }
  }

  function addToCart(key, priceOverride = null, displayName = null) {
    if (!cart[key]) {
      let price = priceOverride;
      let name = displayName;
      if (!price) {
        if (petData[key]) {
          price = petData[key].price;
          name = petData[key].name;
        } else {
          price = 0;
          name = "Unknown";
        }
      }
      cart[key] = { price, qty: 1, name };
    } else {
      cart[key].qty += 1;
    }
    updateCart();
  }

  function updateCart() {
    cartItems.innerHTML = '';
    const keys = Object.keys(cart);
    if (keys.length === 0) {
      cartItems.textContent = 'Keranjang kosong';
      checkoutBtn.disabled = true;
      cartTotal.textContent = `Total: Rp 0`;
      return;
    }
    let total = 0;
    keys.forEach(key => {
      const item = cart[key];
      total += item.price * item.qty;

      const div = document.createElement('div');
      div.className = 'cart-item';

      div.innerHTML = `
        <div class="cart-item-info">
          <div class="cart-item-name">${item.name}</div>
          <div>Harga: ${formatIDR(item.price)} √ó 
            <input type="number" min="1" value="${item.qty}" data-key="${key}" class="qty-input" style="width:50px; text-align:center;"/>
            = ${formatIDR(item.price * item.qty)}</div>
        </div>
        <div class="cart-item-controls">
          <button aria-label="Hapus ${item.name} dari keranjang" data-action="remove" data-key="${key}">√ó</button>
        </div>
      `;

      cartItems.appendChild(div);
    });

    cartTotal.textContent = `Total: ${formatIDR(total)}`;
    checkoutBtn.disabled = false;

    // Event listener untuk hapus item
    const removeButtons = cartItems.querySelectorAll('button[data-action="remove"]');
    removeButtons.forEach(btn => {
      btn.addEventListener('click', e => {
        const key = e.target.dataset.key;
        delete cart[key];
        updateCart();
      });
    });

    // Event listener untuk input qty manual
    const qtyInputs = cartItems.querySelectorAll('.qty-input');
    qtyInputs.forEach(input => {
      input.addEventListener('input', e => {
        const key = e.target.dataset.key;
        let val = parseInt(e.target.value);
        if (isNaN(val) || val < 1) {
          val = 1;
          e.target.value = 1;
        }
        cart[key].qty = val;
        updateCart();
      });
    });
  }

  cartToggleBtn.addEventListener('click', () => {
    const isOpen = cartPanel.classList.toggle('open');
    cartToggleBtn.setAttribute('aria-expanded', isOpen);
  });

  // Validasi form sederhana
  function validateForm() {
    let valid = true;
    if (buyerName.value.trim().length < 3) {
      buyerName.classList.add('error');
      buyerNameError.style.display = 'block';
      valid = false;
    } else {
      buyerName.classList.remove('error');
      buyerNameError.style.display = 'none';
    }
    if (!paymentMethod.value) {
      paymentMethod.classList.add('error');
      paymentMethodError.style.display = 'block';
      valid = false;
    } else {
      paymentMethod.classList.remove('error');
      paymentMethodError.style.display = 'none';
    }
    checkoutBtn.disabled = !valid;
    return valid;
  }

  buyerName.addEventListener('input', validateForm);
  paymentMethod.addEventListener('change', validateForm);

  checkoutForm.addEventListener('submit', e => {
    e.preventDefault();
    if (!validateForm()) return;

    const orderLines = [];
    for (const key in cart) {
      const item = cart[key];
      orderLines.push(`${item.name} x${item.qty} = ${formatIDR(item.price * item.qty)}`);
    }
    const orderText = orderLines.join('%0A');
    const totalText = formatIDR(Object.values(cart).reduce((sum, i) => sum + i.price * i.qty, 0));
    const nameText = encodeURIComponent(buyerName.value.trim());
    const paymentText = encodeURIComponent(paymentMethod.value);
    const noteText = encodeURIComponent(buyerNote.value.trim());

    let waMessage = `Halo,%0ASaya ingin memesan:%0A${orderText}%0ATotal: ${totalText}%0ANama Roblox: ${nameText}%0AMetode Pembayaran: ${paymentText}`;
    if (noteText) waMessage += `%0ACatatan: ${noteText}`;

    const waURL = `https://wa.me/6285651205765?text=${waMessage}`;
    window.open(waURL, '_blank');
  });

  // Initial render
  renderPets();
  renderSheckles();
  renderSprinklers();
  updateCart();
  validateForm();
</script>

</body>
</html>
